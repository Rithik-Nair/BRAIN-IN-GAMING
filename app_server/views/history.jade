// app_server/views/history.jade

doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title
    script(src="https://cdn.jsdelivr.net/npm/chart.js")  // Include Chart.js library
    link(rel="stylesheet", href="/stylesheets/history.css")
  body
    h1= title
    each game in history
      .history-entry
        h3= game.gameName
        p BCI Usage: #{game.bciUsage}% 
        canvas(id="chart-#{game._id}", width="400", height="200")

        // Render the chart for each game
        script.
          const ctx = document.getElementById('chart-#{game._id}').getContext('2d');
          new Chart(ctx, {
            type: 'line', // Or other chart type like 'bar', 'pie', etc.
            data: {
              labels: #{JSON.stringify(game.analysisData.labels)},  // Analysis labels, e.g., time, points, etc.
              datasets: [{
                label: 'BCI Usage',
                data: #{JSON.stringify(game.analysisData.data)},  // Chart data
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
              }]
            },
            options: {
              scales: {
                y: { beginAtZero: true }
              }
            }
          });
